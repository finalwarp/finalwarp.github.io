!function(t){var e={};function s(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=t,s.c=e,s.d=function(t,e,i){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(s.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)s.d(i,r,function(e){return t[e]}.bind(null,r));return i},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s="8SHQ")}({"8SHQ":function(t,e,s){"use strict";s.r(e);const i={black:0,white:16777215,red:16711680,green:39168,blue:3355647,gold:16766720,lightGray:14540253,darkGray:11184810,cardLevel1:17442,cardLevel2:16737792,cardLevel3:3355545,menu:14015451,board:8093053,startScreen:14015451,endScreen:14015451,buttons:{down:"#000077",over:"#0022BB",out:"#0044DD",disabledOver:"#BBBBBB",disabledFill:"#000000"}},r={titleText:{font:"54px Waree, Verdana",color:"#000000"},infoText:{font:"24px Waree, Verdana",color:"#000000",wordWrap:{width:900,useAdvancedWrap:!0}},endScreen:{title:{font:"24px Waree, Verdana",color:"#000000",wordWrap:{width:900,useAdvancedWrap:!0}},summary:{font:"18px Waree, Verdana",color:"#000000"}},cardCosts:{font:"26px Waree, Verdana",color:"#FFFFFF",align:"center",stroke:"#000000",strokeThickness:4},cardPoints:{font:"30px Waree, Verdana",color:"#000000",align:"center"},nobleCosts:{font:"24px Waree, Verdana",color:"#FFFFFF",align:"center",stroke:"#000000",strokeThickness:4},noblePoints:{font:"30px Waree, Verdana",color:"#000000",align:"center"},buttons:{font:"22px Waree, Verdana",color:"#FFFFFF"},menuText:{font:"18px Waree, Verdana",color:"#000000",wordWrap:{width:440,useAdvancedWrap:!0}},playerInfo:{name:{font:"22px Waree, Verdana",color:"#000000"},points:{font:"24px Waree, Verdana",color:"#000000"},cost:{font:"26px Waree, Verdana",color:"#FFFFFF",stroke:"#000000",strokeThickness:4}}};class n extends Phaser.GameObjects.Text{constructor(t,e,s,i,n=180){super(t,e,s,i,r.buttons),this.maxWidth=n,this.isDisabled=!1,this.setOrigin(.5),this.setDisabled(!1),this.updatePadding(),this.setInteractive(),t.add.existing(this),this.on("pointerover",this.over,this),this.on("pointerout",this.out,this),this.on("pointerup",this.up,this),this.on("pointerdown",this.down,this)}updatePadding(){this.setPadding(0,0,0,0);const t=Math.abs(this.maxWidth-this.width),e={left:t/2,top:4,right:t/2,bottom:4};this.setPadding(e)}setText(t){this.text!==t&&(super.setText(t),this.updatePadding())}over(t,e,s,r){this.isDisabled||this.setBackgroundColor(i.buttons.over)}out(t,e){this.isDisabled||this.setBackgroundColor(i.buttons.out)}up(t,e,s,r){this.isDisabled||this.setBackgroundColor(i.buttons.over)}down(t,e,s,r){this.isDisabled||this.setBackgroundColor(i.buttons.down)}removeAllListeners(){super.removeAllListeners(),this.on("pointerover",this.over,this),this.on("pointerout",this.out,this),this.on("pointerup",this.up,this),this.on("pointerdown",this.down,this)}setDisabled(t){this.isDisabled=t,this.isDisabled?(this.setBackgroundColor(i.buttons.disabledOver),this.setFill(i.buttons.disabledFill)):(this.setBackgroundColor(i.buttons.out),this.setFill(r.buttons.color))}}class h extends Phaser.Scene{constructor(){super({key:"StartScreen",active:!0}),this.title=null,this.info=null,this.startGameButton=null,this.viewRulesButton=null,this.twoPlayersButton=null,this.threePlayersButton=null,this.fourPlayersButton=null,this.inputFields=null,this.nameField1=null,this.nameField2=null,this.nameField3=null,this.nameField4=null,this.pointsToWinField=null,this.rulesPageIndex=0,this.rulesList=[],this.previousRulesButton=null,this.nextRulesButton=null,this.backButton=null}preload(){this.cache.html.remove("startScreenForm"),this.load.path="src/assets/",this.load.html("startScreenForm","html/startScreenForm.html"),this.cache.text.remove("rules1"),this.cache.text.remove("rules2"),this.cache.text.remove("rules3"),this.cache.text.remove("rules4"),this.cache.text.remove("rules5"),this.cache.text.remove("rules6"),this.load.text("rules1","text/rules1.txt"),this.load.text("rules2","text/rules2.txt"),this.load.text("rules3","text/rules3.txt"),this.load.text("rules4","text/rules4.txt"),this.load.text("rules5","text/rules5.txt"),this.load.text("rules6","text/rules6.txt")}create(){const t=game.config.width,e=game.config.height,s=this.add.rectangle(0,0,t,e);s.setFillStyle(i.startScreen,1),s.setOrigin(0),this.title=this.add.text(t/2,e/6,"PhaserSplendor",r.titleText),this.title.setOrigin(.5),this.info=this.add.text(t/2,e/3,"",r.infoText),this.info.setOrigin(.5,0),this.startGameButton=new n(this,t/2,e/2,"Start"),this.viewRulesButton=new n(this,t/2,2.5*e/4,"Rules"),this.viewRulesButton.on("pointerup",function(t){this.drawRulesScreen()},this),this.twoPlayersButton=new n(this,t/2-75,e/2,"2",50),this.twoPlayersButton.on("pointerup",function(t){this.drawNamePlayersScreen(2)},this),this.threePlayersButton=new n(this,t/2,e/2,"3",50),this.threePlayersButton.on("pointerup",function(t){this.drawNamePlayersScreen(3)},this),this.fourPlayersButton=new n(this,t/2+75,e/2,"4",50),this.fourPlayersButton.on("pointerup",function(t){this.drawNamePlayersScreen(4)},this),this.inputFields=this.add.dom(t/2,2.5*e/4).createFromCache("startScreenForm"),this.nameField1=this.inputFields.getChildByID("nameField1"),this.nameField2=this.inputFields.getChildByID("nameField2"),this.nameField3=this.inputFields.getChildByID("nameField3"),this.nameField4=this.inputFields.getChildByID("nameField4"),this.pointsToWinField=this.inputFields.getChildByID("points"),this.rulesList=[this.cache.text.get("rules1"),this.cache.text.get("rules2"),this.cache.text.get("rules3"),this.cache.text.get("rules4"),this.cache.text.get("rules5"),this.cache.text.get("rules6")],this.previousRulesButton=new n(this,t/2-200,3.5*e/4,"Previous"),this.previousRulesButton.on("pointerup",function(t){this.rulesPageIndex>0&&this.rulesPageIndex--,this.info.setText(this.rulesList[this.rulesPageIndex])},this),this.nextRulesButton=new n(this,t/2,3.5*e/4,"Next"),this.nextRulesButton.on("pointerup",function(t){this.rulesPageIndex<this.rulesList.length-1&&this.rulesPageIndex++,this.info.setText(this.rulesList[this.rulesPageIndex])},this),this.backButton=new n(this,t/2+200,3.5*e/4,"Back"),this.backButton.on("pointerup",function(t){this.drawStartScreen()},this),this.drawStartScreen()}drawStartScreen(){this.info.setVisible(!0),this.twoPlayersButton.setVisible(!1),this.threePlayersButton.setVisible(!1),this.fourPlayersButton.setVisible(!1),this.inputFields.setVisible(!1),this.startGameButton.setVisible(!0),this.viewRulesButton.setVisible(!0),this.previousRulesButton.setVisible(!1),this.nextRulesButton.setVisible(!1),this.backButton.setVisible(!1),this.info.setText("Splendor made in the Phaser 3 framework.");const t=game.config.width,e=game.config.height;this.startGameButton.setPosition(t/2,e/2),this.viewRulesButton.setPosition(t/2,2.5*e/4),this.startGameButton.removeAllListeners(),this.startGameButton.on("pointerup",function(t){this.drawSelectPlayersScreen()},this)}drawRulesScreen(){this.info.setVisible(!0),this.twoPlayersButton.setVisible(!1),this.threePlayersButton.setVisible(!1),this.fourPlayersButton.setVisible(!1),this.inputFields.setVisible(!1),this.startGameButton.setVisible(!1),this.viewRulesButton.setVisible(!1),this.previousRulesButton.setVisible(!0),this.nextRulesButton.setVisible(!0),this.backButton.setVisible(!0),this.rulesPageIndex=0,this.info.setText(this.rulesList[this.rulesPageIndex])}drawSelectPlayersScreen(){this.info.setVisible(!0),this.twoPlayersButton.setVisible(!0),this.threePlayersButton.setVisible(!0),this.fourPlayersButton.setVisible(!0),this.inputFields.setVisible(!1),this.startGameButton.setVisible(!1),this.viewRulesButton.setVisible(!1),this.previousRulesButton.setVisible(!1),this.nextRulesButton.setVisible(!1),this.backButton.setVisible(!1),this.info.setText("Select Number of Players")}drawNamePlayersScreen(t){this.info.setVisible(!0),this.twoPlayersButton.setVisible(!1),this.threePlayersButton.setVisible(!1),this.fourPlayersButton.setVisible(!1),this.inputFields.setVisible(!0),this.startGameButton.setVisible(!0),this.viewRulesButton.setVisible(!1),this.previousRulesButton.setVisible(!1),this.nextRulesButton.setVisible(!1),this.backButton.setVisible(!1),this.info.setText("Enter your names and points to win (or click Start using default values)"),this.nameField1.hidden=!1,this.nameField2.hidden=!1,this.nameField3.hidden=t<3,this.nameField4.hidden=t<4,this.startGameButton.removeAllListeners(),this.startGameButton.y=3.5*game.config.height/4,this.startGameButton.on("pointerup",function(e){this.startGame(t,[this.nameField1.value,this.nameField2.value,this.nameField3.value,this.nameField4.value],this.pointsToWinField.value)},this)}startGame(t,e,s){s=0===s.length?15:parseInt(s,10);for(let s=0;s<t;s++)0===e[s].length&&(e[s]="Player "+(s+1));e.splice(t,4),this.scene.start("Board",{names:e,pointsToWin:s})}}const a=20,o=55,l=25,d=42,c=a+o,u=a+3*o+5,p=a+3*o+35,C=l+d,g=l+2*d,b={x:315,xDist:100,y:80,yDist:140},y=b.x,x=b.x+b.xDist,m=b.x+2*b.xDist,w=b.x+3*b.xDist,v=b.x+4*b.xDist,k=b.y,T=b.y+b.yDist,S=b.y+2*b.yDist,f={x:500+b.x,y:50,yDist:68},P={x:75+f.x+50,y:55,yDist:80},M={col0:275+2*f.yDist,col1:275+3*f.yDist,col2:275+4*f.yDist,col3:275+5*f.yDist,col4:275+6*f.yDist,col5:275+7*f.yDist,row0:b.y+3*b.yDist+30},B={summaryX:40,summaryY:150,cardX:75,cardY:350,nobleX:275},R={window:{x:5,y:5},playerInfo:{yOffset:150,name:{x:8,y:l},black:{x:a,y:C},white:{x:c,y:C},red:{x:a+2*o,y:C},green:{x:a,y:g},blue:{x:c,y:g},gold:{x:a+2*o+25,y:g},points:{x:p,y:l},reserve1:{x:u,y:C},reserve2:{x:p,y:C},reserve3:{x:u,y:g}},card1x0:{x:y,y:S},card1x1:{x:x,y:S},card1x2:{x:m,y:S},card1x3:{x:w,y:S},card1x4:{x:v,y:S},card2x0:{x:y,y:T},card2x1:{x:x,y:T},card2x2:{x:m,y:T},card2x3:{x:w,y:T},card2x4:{x:v,y:T},card3x0:{x:y,y:k},card3x1:{x:x,y:k},card3x2:{x:m,y:k},card3x3:{x:w,y:k},card3x4:{x:v,y:k},chip:{black:{x:f.x,y:f.y},white:{x:f.x,y:f.y+f.yDist},red:{x:f.x,y:f.y+2*f.yDist},green:{x:f.x,y:f.y+3*f.yDist},blue:{x:f.x,y:f.y+4*f.yDist},gold:{x:f.x,y:f.y+5*f.yDist}},chipCount:{black:{x:f.x+50,y:f.y},white:{x:f.x+50,y:f.y+f.yDist},red:{x:f.x+50,y:f.y+2*f.yDist},green:{x:f.x+50,y:f.y+3*f.yDist},blue:{x:f.x+50,y:f.y+4*f.yDist},gold:{x:f.x+50,y:f.y+5*f.yDist}},noble:{pos0:{x:P.x,y:P.y},pos1:{x:P.x,y:P.y+P.yDist},pos2:{x:P.x,y:P.y+2*P.yDist},pos3:{x:P.x,y:P.y+3*P.yDist},pos4:{x:P.x,y:P.y+4*P.yDist}},inGameMenu:{x:265,y:S+b.yDist/2},cardPos:{x:y,y:0},chipPos0:{x:y,y:0},chipPos1:{x:x,y:0},chipPos2:{x:m,y:0},chipMenu:{pos0:{x:M.col0,y:M.row0},pos1:{x:M.col1,y:M.row0},pos2:{x:M.col2,y:M.row0},pos3:{x:M.col3,y:M.row0},pos4:{x:M.col4,y:M.row0},pos5:{x:M.col5,y:M.row0}},chipMenuCount:{pos0:{x:M.col0,y:M.row0+50},pos1:{x:M.col1,y:M.row0+50},pos2:{x:M.col2,y:M.row0+50},pos3:{x:M.col3,y:M.row0+50},pos4:{x:M.col4,y:M.row0+50},pos5:{x:M.col5,y:M.row0+50}},endScreen:{titleY:75,summary:{x:B.summaryX,y:B.summaryY},card:{x:B.cardX,y:B.cardY},nobleX:B.nobleX}};class I{static convertChipsToColorJson(t){const e={black:0,white:0,red:0,green:0,blue:0,gold:0};return t.forEach(function(t){switch(t.color){case"black":e.black++;break;case"white":e.white++;break;case"red":e.red++;break;case"green":e.green++;break;case"blue":e.blue++;break;case"gold":e.gold++}},this),e}static addChipsToColorJson(t,e){const s=I.convertChipsToColorJson(t);return e.black+=s.black,e.white+=s.white,e.red+=s.red,e.green+=s.green,e.blue+=s.blue,e.gold+=s.gold,e}static subtractChipsToColorJson(t,e){const s=I.convertChipsToColorJson(t);return e.black-=s.black,e.white-=s.white,e.red-=s.red,e.green-=s.green,e.blue-=s.blue,e.gold-=s.gold,e}static copyColorJson(t){return{black:t.black,white:t.white,red:t.red,green:t.green,blue:t.blue,gold:t.gold}}static addColorJson(t,e){return e.black+=t.black,e.white+=t.white,e.red+=t.red,e.green+=t.green,e.blue+=t.blue,e.gold+=t.gold,e}static subtractColorJson(t,e){return e.black-=t.black,e.white-=t.white,e.red-=t.red,e.green-=t.green,e.blue-=t.blue,e.gold-=t.gold,e}static getColorCode(t){let e=i.black;switch(t){case"black":e=i.black;break;case"white":e=i.white;break;case"red":e=i.red;break;case"green":e=i.green;break;case"blue":e=i.blue;break;case"gold":e=i.gold}return e}static shuffleList(t){let e=t.length,s=0,i=0;for(;0!==e;)i=Math.floor(Math.random()*e),s=t[e-=1],t[e]=t[i],t[i]=s;return t}}const E={cardX:85,cardY:125,topY:34,costCircleRadius:15,costBorderOffset:2,symbolShapeData:[0,20,5,15,15,15,20,20,10,30],symbolLine1:[8,15,5,20,10,30,15,20,12,15],symbolLine2:[0,20,20,20],symbolScale:1.3,symbolStroke:1.5,textStroke:4,borderStrokeOut:2,borderStrokeOver:4};class _ extends Phaser.GameObjects.Container{constructor(t,e,s,i=!0){super(t,e.x,e.y),this.startCoordinates=e,this.border=null,this.cardJson=s,this.isFaceUp=i,i?this.drawFaceUp():this.drawFaceDown(),this.setSize(E.cardX,E.cardY),this.addInputs(),this.setInteractive(),t.add.existing(this)}get coordinates(){return{x:this.x,y:this.y}}flipCard(){this.isFaceUp=!this.isFaceUp,this.isFaceUp?this.drawFaceUp():this.drawFaceDown()}drawFaceDown(){let t=i.cardLevel1;2===this.cardJson.level?t=i.cardLevel2:3===this.cardJson.level&&(t=i.cardLevel3);const e=this.scene.add.rectangle(0,0,E.cardX,E.cardY,t);this.add(e),1===this.cardJson.level?this.drawSymbol(e.x,e.y,i.gold):2===this.cardJson.level?(this.drawSymbol(e.x,e.y-e.height/5,i.gold),this.drawSymbol(e.x,e.y+e.height/5,i.gold)):3===this.cardJson.level&&(this.drawSymbol(e.x,e.y-e.height/3,i.gold),this.drawSymbol(e.x,e.y,i.gold),this.drawSymbol(e.x,e.y+e.height/3,i.gold));const s=[0,0,0,e.height,.75*e.width,e.height,.75*e.width,0],r=this.scene.add.polygon(0,0,s);r.setStrokeStyle(E.borderStrokeOut,i.black),this.add(r);const n=[0,0,0,e.height,e.width,e.height,e.width,0];this.border=this.scene.add.polygon(0,0,n),this.border.setStrokeStyle(E.borderStrokeOut,i.black),this.add(this.border)}drawFaceUp(){const t=[],e=[];0!==this.cardJson.cost.black&&(t.push(i.black),e.push(this.cardJson.cost.black)),0!==this.cardJson.cost.white&&(t.push(i.white),e.push(this.cardJson.cost.white)),0!==this.cardJson.cost.red&&(t.push(i.red),e.push(this.cardJson.cost.red)),0!==this.cardJson.cost.green&&(t.push(i.green),e.push(this.cardJson.cost.green)),0!==this.cardJson.cost.blue&&(t.push(i.blue),e.push(this.cardJson.cost.blue));const s=I.getColorCode(this.cardJson.color),n=this.scene.add.rectangle(0,0,E.cardX,E.cardY,s);this.add(n);const h=this.scene.add.rectangle(n.x,n.getTopRight().y+E.topY/2,n.width,E.topY,i.lightGray);this.add(h),this.drawCost(n.getTopLeft().x+n.width/4,h.getBottomRight().y+(n.height-h.height)/4,t[0],e[0]),t.length>=2&&this.drawCost(n.getTopLeft().x+n.width/4,h.getBottomRight().y+(n.height-h.height)/4*3,t[1],e[1]),t.length>=3&&this.drawCost(n.getTopLeft().x+n.width/4*3,h.getBottomRight().y+(n.height-h.height)/4,t[2],e[2]),4===t.length&&this.drawCost(n.getTopLeft().x+n.width/4*3,h.getBottomRight().y+(n.height-h.height)/4*3,t[3],e[3]);const a=this.scene.add.text(n.getTopLeft().x+n.width/4,h.y,this.cardJson.points,r.cardPoints);a.setOrigin(.5),this.add(a),this.drawSymbol(n.getTopLeft().x+n.width/4*3,h.y,s);const o=[0,0,0,n.height,n.width,n.height,n.width,0];this.border=this.scene.add.polygon(0,0,o),this.border.setStrokeStyle(E.borderStrokeOut,i.black),this.add(this.border)}drawCost(t,e,s,n){const h=this.scene.add.circle(t,e,E.costCircleRadius,s),a=this.scene.add.circle(t,e,E.costCircleRadius+E.costBorderOffset,i.white),o=this.scene.add.circle(t,e,E.costCircleRadius+2*E.costBorderOffset,i.black),l=this.scene.add.text(h.x,h.y,n,r.cardCosts);l.setOrigin(.5),this.add(o),this.add(a),this.add(h),this.add(l)}drawSymbol(t,e,s){const r=this.scene.add.polygon(t,e,E.symbolShapeData,s);r.setScale(E.symbolScale),r.y-=r.displayHeight,r.setStrokeStyle(E.symbolStroke,i.black),this.add(r)}addInputs(){this.removeInputs(),this.on("pointerover",this.over,this),this.on("pointerout",this.out,this),this.on("pointerup",this.up,this)}removeInputs(){this.off("pointerover"),this.off("pointerout"),this.off("pointerup")}over(t,e,s,r){this.border.setStrokeStyle(E.borderStrokeOver,i.black)}out(t,e){this.border.setStrokeStyle(E.borderStrokeOut,i.black)}up(t,e,s,i){this.scene.events.emit("clickCard",this)}}const D={length:75,costHeight:25,costWidth:35,borderStroke:2};class A extends Phaser.GameObjects.Container{constructor(t,e,s){super(t,e.x,e.y),this.nobleJson=s,this.drawNoble(),t.add.existing(this)}get coordinates(){return{x:this.x,y:this.y}}drawNoble(){const t=this.scene.add.rectangle(0,0,D.length,D.length,i.darkGray);t.setStrokeStyle(D.borderStroke,i.black),this.add(t);const e=t.getTopLeft().x,s=t.getTopLeft().y,n=[{x:e,y:s+D.length/3-D.costHeight},{x:e,y:s+2*D.length/3-D.costHeight-D.borderStroke/2},{x:e,y:s+D.length-D.costHeight-D.borderStroke/2}];let h=0;this.nobleJson.cost.white>0&&this.drawCost(n[h++],this.nobleJson.cost.white,i.white),this.nobleJson.cost.blue>0&&this.drawCost(n[h++],this.nobleJson.cost.blue,i.blue),this.nobleJson.cost.green>0&&this.drawCost(n[h++],this.nobleJson.cost.green,i.green),this.nobleJson.cost.red>0&&this.drawCost(n[h++],this.nobleJson.cost.red,i.red),this.nobleJson.cost.black>0&&this.drawCost(n[h++],this.nobleJson.cost.black,i.black);const a=this.scene.add.text(t.getBottomRight().x-6,t.getBottomRight().y-2,this.nobleJson.points,r.noblePoints);a.setOrigin(1),this.add(a)}drawCost(t,e,s){const n=this.scene.add.rectangle(t.x,t.y,D.costWidth,D.costHeight,s);n.setStrokeStyle(D.borderStroke,i.black),n.setOrigin(0),this.add(n);const h=this.scene.add.text(n.getCenter().x,n.getCenter().y,e,r.nobleCosts);h.setOrigin(.5),this.add(h)}}const L={cardXDist:45,cardYDist:140,nobleXDist:100};class J extends Phaser.Scene{constructor(){super({key:"EndScreen",active:!1,visible:!1}),this.title=null,this.summary=null,this.backToStartScreenButton=null,this.playerManager=null,this.gameObjects=[]}init(t){this.playerManager=t.playerManager}create(){const t=game.config.width,e=game.config.height,s=this.add.rectangle(0,0,t,e);s.setFillStyle(i.startScreen,1),s.setOrigin(0);const h=this.playerManager.getWinners().map(function(t){return t.name}).join(", ");this.title=this.add.text(t/2,R.endScreen.titleY,`Congratulations ${h}`,r.endScreen.title),this.title.setOrigin(.5,0),this.summary=this.add.text(R.endScreen.summary.x,R.endScreen.summary.y,"Click on a player's name to view their summary.",r.endScreen.summary),this.player1Button=new n(this,t/2-300,e-50,this.playerManager.players[0].name),this.player1Button.on("pointerup",function(t){this.drawPlayerSummary(this.playerManager.players[0])},this),this.player2Button=new n(this,t/2-100,e-50,this.playerManager.players[1].name),this.player2Button.on("pointerup",function(t){this.drawPlayerSummary(this.playerManager.players[1])},this),this.playerManager.numPlayers>2&&(this.player3Button=new n(this,t/2+100,e-50,this.playerManager.players[2].name),this.player3Button.on("pointerup",function(t){this.drawPlayerSummary(this.playerManager.players[2])},this)),this.playerManager.numPlayers>3&&(this.player4Button=new n(this,t/2+300,e-50,this.playerManager.players[3].name),this.player4Button.on("pointerup",function(t){this.drawPlayerSummary(this.playerManager.players[3])},this)),this.backToStartButton=new n(this,t-150,50,"Back To Start"),this.backToStartButton.on("pointerup",function(t){this.backToStartScreen()},this)}drawPlayerSummary(t){this.clearPlayerSummary(),this.summary.setText(`${t.name}\n`+`Points: ${t.points}\n`+`Level 1 Cards: ${t.numLevel1Cards}\n`+`Level 2 Cards: ${t.numLevel2Cards}\n`+`Level 3 Cards: ${t.numLevel3Cards}\n`+`Total Rounds: ${this.playerManager.lastRound}`);let e=R.endScreen.card.x,s=R.endScreen.card.y,i=0;t.cardManager.cardJsonList.forEach(function(t){20===i&&(e=R.endScreen.card.x,s+=L.cardYDist,i=0),this.gameObjects.push(new _(this,{x:e,y:s},t)),e+=L.cardXDist,i++},this),e=R.endScreen.nobleX,s=this.summary.y+75,t.nobleManager.nobleJsonList.forEach(function(t){this.gameObjects.push(new A(this,{x:e,y:s},t)),e+=L.nobleXDist},this)}clearPlayerSummary(){this.summary.setText(""),this.gameObjects.forEach(function(t){t.destroy()})}backToStartScreen(){this.scene.start("RestartScreen")}}class V extends Phaser.Scene{constructor(){super({key:"RestartScreen",active:!1,visible:!1})}create(){game.restartGame()}}class O{constructor(t){this.players=t.players,this.numPlayers=t.players.length,this.pointsToWin=t.pointsToWin,this.currentPlayerIndex=0,this.currentRound=1,this.isLastRound=!1,this.lastRound=-1}getCurrentPlayer(){return this.players[this.currentPlayerIndex]}endTurn(){!this.isLastRound&&this.getCurrentPlayer().points>=this.pointsToWin&&(this.isLastRound=!0,this.lastRound=this.currentRound),this.currentPlayerIndex=(this.currentPlayerIndex+1)%this.numPlayers,0===this.currentPlayerIndex&&this.currentRound++}havePlayersFinishedLastRound(){return this.isLastRound&&-1!==this.lastRound&&this.lastRound<this.currentRound}getWinners(){let t=-1,e=-1,s=[];for(let i=0;i<this.players.length;i++)this.players[i].points>t?(t=this.players[i].points,e=this.players[i].numCards,s=[this.players[i]]):this.players[i].points===t&&(this.players[i].numCards<e?(e=this.players[i].numCards,s=[this.players[i]]):this.players[i].numCards===e&&s.push(this.players[i]));return s}}class F{constructor(t={black:0,white:0,red:0,green:0,blue:0,gold:0}){this.data=t}get black(){return this.data.black}get white(){return this.data.white}get red(){return this.data.red}get green(){return this.data.green}get blue(){return this.data.blue}get gold(){return this.data.gold}get total(){return this.black+this.white+this.red+this.green+this.blue+this.gold}addByJson(t){I.addColorJson(t,this.data)}removeByJson(t){I.subtractColorJson(t,this.data)}hasEnoughToGet(t,e=!0){let s=0;return t.black>0&&t.black>this.black&&(s+=t.black-this.black),t.white>0&&t.white>this.white&&(s+=t.white-this.white),t.red>0&&t.red>this.red&&(s+=t.red-this.red),t.green>0&&t.green>this.green&&(s+=t.green-this.green),t.blue>0&&t.blue>this.blue&&(s+=t.blue-this.blue),e?this.gold-s>=0:s<=0}getAmountToBuyUsingGoldIfRequired(t){const e={black:0,white:0,red:0,green:0,blue:0,gold:0};return t.black>0&&(e.black=Math.min(t.black,this.black),e.gold+=Math.max(t.black-this.black,0)),t.white>0&&(e.white=Math.min(t.white,this.white),e.gold+=Math.max(t.white-this.white,0)),t.red>0&&(e.red=Math.min(t.red,this.red),e.gold+=Math.max(t.red-this.red,0)),t.green>0&&(e.green=Math.min(t.green,this.green),e.gold+=Math.max(t.green-this.green,0)),t.blue>0&&(e.blue=Math.min(t.blue,this.blue),e.gold+=Math.max(t.blue-this.blue,0)),e}}class G{constructor(){this.cardJsonList=[]}get points(){let t=0;return this.cardJsonList.forEach(function(e){t+=e.points}),t}get black(){return this.getCountColor("black")}get white(){return this.getCountColor("white")}get red(){return this.getCountColor("red")}get green(){return this.getCountColor("green")}get blue(){return this.getCountColor("blue")}get numLevel1(){let t=0;return this.cardJsonList.forEach(function(e){1===e.level&&t++}),t}get numLevel2(){let t=0;return this.cardJsonList.forEach(function(e){2===e.level&&t++}),t}get numLevel3(){let t=0;return this.cardJsonList.forEach(function(e){3===e.level&&t++}),t}get total(){return this.cardJsonList.length}getCountColor(t){let e=0;return this.cardJsonList.forEach(function(s){s.color===t&&e++}),e}add(t){this.cardJsonList.push(t)}remove(t){let e=0;for(e=0;e<this.cardJsonList.length&&this.cardJsonList[e]!==t;e++);this.cardJsonList.splice(e,1)}hasEnoughToGet(t){let e=0;return t.black>0&&t.black>this.black&&(e+=t.black-this.black),t.white>0&&t.white>this.white&&(e+=t.white-this.white),t.red>0&&t.red>this.red&&(e+=t.red-this.red),t.green>0&&t.green>this.green&&(e+=t.green-this.green),t.blue>0&&t.blue>this.blue&&(e+=t.blue-this.blue),e<=0}getRemainingCost(t){return{black:Math.max(t.black-this.black,0),white:Math.max(t.white-this.white,0),red:Math.max(t.red-this.red,0),green:Math.max(t.green-this.green,0),blue:Math.max(t.blue-this.blue,0),gold:t.gold}}}class H{constructor(){this.nobleJsonList=[]}get points(){let t=0;return this.nobleJsonList.forEach(function(e){t+=e.points}),t}add(t){this.nobleJsonList.push(t)}}class Y{constructor(t){this.name=t,this.cardManager=new G,this.reserveCardManager=new G,this.nobleManager=new H,this.chipManager=new F({black:0,white:0,red:0,green:0,blue:0,gold:0})}get points(){return this.cardManager.points+this.nobleManager.points}get chips(){return this.chipManager.data}get numChips(){return this.chipManager.total}get numGoldChips(){return this.chipManager.gold}get numCards(){return this.cardManager.total}get numReserveCards(){return this.reserveCardManager.total}get numLevel1Cards(){return this.cardManager.numLevel1}get numLevel2Cards(){return this.cardManager.numLevel2}get numLevel3Cards(){return this.cardManager.numLevel3}buyCard(t,e=null){if(!this.canBuy(t))return null;let s=null;if(!this.cardManager.hasEnoughToGet(t.cardJson.cost))if(null!==e)s=this.cardManager.getRemainingCost(e);else{const e=this.cardManager.getRemainingCost(t.cardJson.cost);s=this.chipManager.hasEnoughToGet(e,!1)?e:this.chipManager.getAmountToBuyUsingGoldIfRequired(e)}return this.chipManager.removeByJson(s),this.cardManager.add(t.cardJson),this.isReserved(t)&&this.reserveCardManager.remove(t.cardJson),s}canBuy(t){const e=this.cardManager.getRemainingCost(t.cardJson.cost);return this.cardManager.hasEnoughToGet(t.cardJson.cost)||this.chipManager.hasEnoughToGet(e)}canBuyMultipleWaysWithChips(t){if(!this.canBuy(t))return!1;if(this.cardManager.hasEnoughToGet(t.cardJson.cost))return!1;const e=this.cardManager.getRemainingCost(t.cardJson.cost);return this.chipManager.hasEnoughToGet(e,!1)&&this.numGoldChips>0}canReserve(){return this.reserveCardManager.total<3}isReserved(t){for(let e=0;e<this.reserveCardManager.cardJsonList.length;e++)if(t.cardJson.cost===this.reserveCardManager.cardJsonList[e].cost)return!0;return!1}returnChips(t){this.chipManager.removeByJson(I.convertChipsToColorJson(t))}isOverChipLimit(t){return t<0?(console.log("Error: numChips is an invalid value: "+t),this.numChips>10):this.numChips+t>10}numOverChipLimit(t){return t<0?(console.log("Error: numChips is an invalid value: "+t),this.numChips-10):this.numChips+t-10}takeChip(t){this.chipManager.addByJson(I.convertChipsToColorJson([t]))}takeChips(t){this.chipManager.addByJson(I.convertChipsToColorJson(t))}reserveCard(t){this.reserveCardManager.add(t.cardJson)}getReserveCardJson(t){return t+1<=this.numReserveCards?this.reserveCardManager.cardJsonList[t]:null}canTakeNoble(t){return this.cardManager.hasEnoughToGet(t.nobleJson.cost)}addNoble(t){this.nobleManager.add(t.nobleJson)}}const W={chipRadius:30,chipStroke:2,chipStrokeOver:4,innerCircleRadius:24,symbolShapeData:[0,20,5,15,15,15,20,20,10,30],symbolLine1:[8,15,5,20,10,30,15,20,12,15],symbolLine2:[0,20,20,20],symbolScale:1.3,symbolStroke:1.5,goldSymbolRadius:15};class U extends Phaser.GameObjects.Container{constructor(t,e,s){super(t,e.x,e.y),this.color=s,this.circle=null,this.draw(),this.addInputs(),this.setInteractive(new Phaser.Geom.Circle(0,0,W.chipRadius),Phaser.Geom.Circle.Contains),t.add.existing(this)}get coordinates(){return{x:this.x,y:this.y}}draw(){const t=I.getColorCode(this.color);this.circle=this.scene.add.circle(0,0,W.chipRadius,t),this.circle.setStrokeStyle(W.chipStroke,i.black),this.add(this.circle);const e=this.scene.add.circle(0,0,W.innerCircleRadius,i.darkGray,128);e.setStrokeStyle(W.chipStroke,i.black),this.add(e),t===i.gold?this.drawGoldSymbol(this.circle.x,this.circle.y,t):this.drawSymbol(this.circle.x,this.circle.y,t)}drawSymbol(t,e,s){const r=this.scene.add.polygon(t,e,W.symbolShapeData,s);r.setScale(W.symbolScale),r.y-=r.displayHeight,r.setStrokeStyle(W.symbolStroke,i.black),this.add(r)}drawGoldSymbol(t,e,s){const r=this.scene.add.star(t,e,5,W.goldSymbolRadius/2,W.goldSymbolRadius,s);r.setStrokeStyle(W.symbolStroke,i.black),this.add(r)}addInputs(){this.removeInputs(),this.on("pointerover",this.over,this),this.on("pointerout",this.out,this),this.on("pointerup",this.up,this)}removeInputs(){this.off("pointerover"),this.off("pointerout"),this.off("pointerup")}over(t,e,s,r){this.circle.setStrokeStyle(W.chipStrokeOver,i.black)}out(t,e){this.circle.setStrokeStyle(W.chipStroke,i.black)}up(t,e,s,i){this.scene.events.emit("clickChip",this)}}class N extends Phaser.Scene{constructor(){super({key:"Board",active:!1,visible:!1}),this.gameData=null,this.cards=null,this.cardJsonDeck1=[],this.cardJsonDeck2=[],this.cardJsonDeck3=[],this.blackChip=null,this.whiteChip=null,this.redChip=null,this.greenChip=null,this.blueChip=null,this.goldChip=null,this.chipManager=null,this.nobles=null,this.InGameMenu=null,this.playerManager=null,this.chipCountText={black:null,white:null,red:null,green:null,blue:null,gold:null}}init(t){this.gameData=t}preload(){this.InGameMenu=this.scene.get("InGameMenu"),this.scene.sendToBack("InGameMenu"),this.PlayerInfoPane=this.scene.get("PlayerInfoPane"),this.cache.json.remove("cardJsonLevel1"),this.cache.json.remove("cardJsonLevel2"),this.cache.json.remove("cardJsonLevel3"),this.cache.json.remove("nobleJson"),this.load.path="src/assets/",this.load.json("cardJsonLevel1","json/cardData1.json"),this.load.json("cardJsonLevel2","json/cardData2.json"),this.load.json("cardJsonLevel3","json/cardData3.json"),this.load.json("nobleJson","json/nobleTileData.json")}create(){this.cardJsonDeck1=I.shuffleList(this.cache.json.get("cardJsonLevel1").data),this.cardJsonDeck2=I.shuffleList(this.cache.json.get("cardJsonLevel2").data),this.cardJsonDeck3=I.shuffleList(this.cache.json.get("cardJsonLevel3").data),this.cards=this.add.group(),this.drawCard(R.card3x0,3,!1),this.drawCard(R.card3x1,3),this.drawCard(R.card3x2,3),this.drawCard(R.card3x3,3),this.drawCard(R.card3x4,3),this.drawCard(R.card2x0,2,!1),this.drawCard(R.card2x1,2),this.drawCard(R.card2x2,2),this.drawCard(R.card2x3,2),this.drawCard(R.card2x4,2),this.drawCard(R.card1x0,1,!1),this.drawCard(R.card1x1,1),this.drawCard(R.card1x2,1),this.drawCard(R.card1x3,1),this.drawCard(R.card1x4,1);let t=7,e=5;switch(this.gameData.names.length){case 3:t=5,e=4;break;case 2:t=4,e=3;break;case 4:default:t=7,e=5}this.chipManager=new F,this.chipManager.addByJson({black:t,white:t,red:t,green:t,blue:t,gold:5}),this.drawChips(),this.drawChipCountText();const s=I.shuffleList(this.cache.json.get("nobleJson").data),i=[R.noble.pos0,R.noble.pos1,R.noble.pos2,R.noble.pos3,R.noble.pos4];this.nobles=this.add.group();for(let t=0;t<e;t++)this.nobles.add(new A(this,i[t],s[t]));const r=[];for(let t=0;t<this.gameData.names.length;t++)r.push(new Y(this.gameData.names[t]));this.playerManager=new O({players:r,pointsToWin:this.gameData.pointsToWin}),this.scene.launch("PlayerInfoPane",{playerManager:this.playerManager}),this.scene.launch("InGameMenu",{playerManager:this.playerManager}),this.events.on("clickCard",this.clickCard,this),this.events.on("clickChip",this.clickChip,this),this.events.on("buyCard",this.buyCard,this),this.events.on("takeChips",this.takeChips,this),this.events.on("takeAndReturnChips",this.takeAndReturnChips,this),this.events.on("reserveCard",this.reserveCard,this),this.events.on("reserveCardAndReturnChips",this.reserveCardAndReturnChips,this),this.events.on("endTurn",this.endTurn,this),this.events.on("enableBoard",this.enableBoard,this),this.events.on("disableBoard",this.disableBoard,this),this.events.on("disableChips",this.disableChips,this),this.events.on("disableShortStackChips",this.disableShortStackChips,this)}drawChips(){this.blackChip=new U(this,R.chip.black,"black"),this.whiteChip=new U(this,R.chip.white,"white"),this.redChip=new U(this,R.chip.red,"red"),this.greenChip=new U(this,R.chip.green,"green"),this.blueChip=new U(this,R.chip.blue,"blue");const t=new U(this,R.chip.gold,"gold");t.removeInputs(),this.goldChip=t}drawChipCountText(){this.chipCountText.black=this.add.text(R.chipCount.black.x,R.chipCount.black.y,"",r.menuText),this.chipCountText.white=this.add.text(R.chipCount.white.x,R.chipCount.white.y,"",r.menuText),this.chipCountText.red=this.add.text(R.chipCount.red.x,R.chipCount.red.y,"",r.menuText),this.chipCountText.green=this.add.text(R.chipCount.green.x,R.chipCount.green.y,"",r.menuText),this.chipCountText.blue=this.add.text(R.chipCount.blue.x,R.chipCount.blue.y,"",r.menuText),this.chipCountText.gold=this.add.text(R.chipCount.gold.x,R.chipCount.gold.y,"",r.menuText),this.chipCountText.black.setOrigin(.5),this.chipCountText.white.setOrigin(.5),this.chipCountText.red.setOrigin(.5),this.chipCountText.green.setOrigin(.5),this.chipCountText.blue.setOrigin(.5),this.chipCountText.gold.setOrigin(.5)}get currentPlayer(){return this.playerManager.getCurrentPlayer()}endTurn(){this.takeNobleIfEligible(),this.playerManager.endTurn(),this.PlayerInfoPane.events.emit("updatePlayerInfoPane"),this.playerManager.isLastRound&&this.PlayerInfoPane.events.emit("isLastRound"),this.InGameMenu.events.emit("setDefaultMenuText"),this.playerManager.havePlayersFinishedLastRound()&&(this.scene.stop("Board"),this.scene.stop("PlayerInfoPane"),this.scene.stop("InGameMenu"),this.scene.start("EndScreen",{playerManager:this.playerManager}))}clickCard(t){this.InGameMenu.events.emit("addCardToMenu",t)}clickChip(t){this.InGameMenu.events.emit("addChipToMenu",t)}buyCard(t,e=null){const s=this.currentPlayer.isReserved(t),i=this.currentPlayer.buyCard(t,e);null!==i&&this.addChipsByJson(i),s||(this.drawCard(t.startCoordinates,t.cardJson.level),this.removeCard(t)),this.endTurn()}takeChips(t){this.currentPlayer.takeChips(t),this.removeChips(t),this.endTurn()}takeAndReturnChips(t,e){this.currentPlayer.takeChips(t),this.removeChips(t),this.currentPlayer.returnChips(e),this.addChipsByJson(I.convertChipsToColorJson(e)),this.endTurn()}reserveCard(t){this.currentPlayer.reserveCard(t),this.drawCard(t.startCoordinates,t.cardJson.level,t.isFaceUp),this.removeCard(t),this.chipManager.gold>0&&(this.currentPlayer.takeChip(this.goldChip),this.removeChip(this.goldChip)),this.endTurn()}reserveCardAndReturnChips(t,e,s){this.currentPlayer.reserveCard(t),this.drawCard(t.startCoordinates,t.cardJson.level,t.isFaceUp),this.removeCard(t),this.currentPlayer.takeChips(e),this.removeChips(e),this.currentPlayer.returnChips(s),this.addChipsByJson(I.convertChipsToColorJson(s)),this.endTurn()}takeNobleIfEligible(){let t=0;const e=[];this.nobles.getChildren().forEach(function(s){this.currentPlayer.canTakeNoble(s)&&(t++,e.push(s))},this),1===t?(this.currentPlayer.addNoble(e[0]),this.nobles.remove(e[0],!0,!0)):t>1&&(this.currentPlayer.addNoble(e[0]),this.nobles.remove(e[0],!0,!0))}disableBoard(){this.disableChips("all"),this.cards.getChildren().forEach(function(t){t.removeInputs()})}enableBoard(){this.enableChips("all"),this.cards.getChildren().forEach(function(t){t.addInputs()})}disableChips(t){"black"!==t&&"all"!==t||this.blackChip.removeInputs(),"white"!==t&&"all"!==t||this.whiteChip.removeInputs(),"red"!==t&&"all"!==t||this.redChip.removeInputs(),"green"!==t&&"all"!==t||this.greenChip.removeInputs(),"blue"!==t&&"all"!==t||this.blueChip.removeInputs()}disableShortStackChips(t){"black"===t&&this.chipManager.black<4?this.blackChip.removeInputs():"white"===t&&this.chipManager.white<4?this.whiteChip.removeInputs():"red"===t&&this.chipManager.red<4?this.redChip.removeInputs():"green"===t&&this.chipManager.green<4?this.greenChip.removeInputs():"blue"===t&&this.chipManager.blue<4&&this.blueChip.removeInputs()}enableChips(t){"black"!==t&&"all"!==t||this.blackChip.addInputs(),"white"!==t&&"all"!==t||this.whiteChip.addInputs(),"red"!==t&&"all"!==t||this.redChip.addInputs(),"green"!==t&&"all"!==t||this.greenChip.addInputs(),"blue"!==t&&"all"!==t||this.blueChip.addInputs()}drawCard(t,e,s=!0){let i=null;1===e&&this.cardJsonDeck1.length>0?i=this.cardJsonDeck1.pop():2===e&&this.cardJsonDeck2.length>0?i=this.cardJsonDeck2.pop():3===e&&this.cardJsonDeck3.length>0&&(i=this.cardJsonDeck3.pop()),null===i?this.cards.getChildren().forEach(function(s){s.isFaceUp||(1===e&&s.coordinates.x===R.card1x0.x&&s.coordinates.y===R.card1x0.y?(s.x=t.x,s.y=t.y,s.flipCard()):2===e&&s.coordinates.x===R.card2x0.x&&s.coordinates.y===R.card2x0.y?(s.x=t.x,s.y=t.y,s.flipCard()):3===e&&s.coordinates.x===R.card3x0.x&&s.coordinates.y===R.card3x0.y&&(s.x=t.x,s.y=t.y,s.flipCard()))},this):this.cards.add(new _(this,t,i,s))}removeCard(t){this.cards.remove(t,!0,!0)}addChipsByJson(t){I.addColorJson(t,this.chipManager.data)}removeChips(t){I.subtractChipsToColorJson(t,this.chipManager.data)}removeChip(t){I.subtractChipsToColorJson([t],this.chipManager.data)}update(){this.updateChips()}updateChips(){const t=I.convertChipsToColorJson(this.InGameMenu.chips);this.blackChip.setVisible(this.chipManager.black-t.black!=0),this.whiteChip.setVisible(this.chipManager.white-t.white!=0),this.redChip.setVisible(this.chipManager.red-t.red!=0),this.greenChip.setVisible(this.chipManager.green-t.green!=0),this.blueChip.setVisible(this.chipManager.blue-t.blue!=0),this.goldChip.setVisible(this.chipManager.gold-t.gold!=0),this.chipCountText.black.setText(`x ${this.chipManager.black-t.black}`),this.chipCountText.white.setText(`x ${this.chipManager.white-t.white}`),this.chipCountText.red.setText(`x ${this.chipManager.red-t.red}`),this.chipCountText.green.setText(`x ${this.chipManager.green-t.green}`),this.chipCountText.blue.setText(`x ${this.chipManager.blue-t.blue}`),this.chipCountText.gold.setText(`x ${this.chipManager.gold-t.gold}`)}get chipCountNoGold(){return this.chipManager.black+this.chipManager.white+this.chipManager.red+this.chipManager.green+this.chipManager.blue}get chipColorCountNoGold(){let t=0;return this.chipManager.black>0&&t++,this.chipManager.white>0&&t++,this.chipManager.red>0&&t++,this.chipManager.green>0&&t++,this.chipManager.blue>0&&t++,t}}const j={EMPTY:"EMPTY",BUY_OR_RESERVE_CARD:"BUY_OR_RESERVE_CARD",RESERVE_CARD:"RESERVE_CARD",BUY_CARD_SWAP_CHIPS:"BUY_CARD_SWAP_CHIPS",BUY_CARD_SWAP_CHIPS_REPLACED:"BUY_CARD_SWAP_CHIPS_REPLACED",ADDING_CHIP:"ADDING_CHIP",TAKE_CHIPS:"TAKE_CHIPS",OVER_CHIP_LIMIT:"OVER_CHIP_LIMIT",OVER_CHIP_LIMIT_RETURN_CHIPS:"OVER_CHIP_LIMIT_RETURN_CHIPS",BUY_RESERVE_CARD:"BUY_RESERVE_CARD"},$={borderWidth:750,borderHeight:200,borderX:225,borderY:430,borderStroke:2};class X extends Phaser.Scene{constructor(){super({key:"InGameMenu",active:!1,visible:!1}),this.chips=[],this.card=null,this.isReserved=!1,this.customCost={black:0,white:0,red:0,green:0,blue:0,gold:0},this.returnChips=[],this.blackChip=null,this.whiteChip=null,this.redChip=null,this.greenChip=null,this.blueChip=null,this.goldChip=null,this.chipCountText={black:null,white:null,red:null,green:null,blue:null,gold:null},this.rect=null,this.menuText=null,this.button1=null,this.button2=null,this.cancelButton=null,this.skipTurnButton=null,this.tween1=null,this.tween2=null,this.tween3=null,this.Board=null,this.playerManager=null,this.state=null}init(t){this.playerManager=t.playerManager}preload(){this.Board=this.scene.get("Board")}create(){this.events.on("addCardToMenu",this.addCardToMenu,this),this.events.on("addChipToMenu",this.addChipToMenu,this),this.events.on("addReserveCardToMenu",this.addReserveCardToMenu,this),this.events.on("clickChip",this.clickChip,this),this.events.on("setDefaultMenuText",this.setDefaultMenuText,this),this.drawWindow(),this.updateBoardAndMenu(j.EMPTY)}get currentPlayer(){return this.playerManager.getCurrentPlayer()}drawWindow(){this.rect=this.add.rectangle(0,0,$.borderWidth,$.borderHeight),this.rect.setStrokeStyle($.borderStroke,i.black),this.rect.setFillStyle(i.menu,1),this.rect.setOrigin(0),this.rect.x=R.inGameMenu.x,this.rect.y=R.inGameMenu.y,this.button1=new n(this,this.rect.x+this.rect.width-100,this.rect.y+this.rect.height/5,""),this.button2=new n(this,this.rect.x+this.rect.width-100,this.rect.y+2*this.rect.height/5,""),this.cancelButton=new n(this,this.rect.x+this.rect.width-100,this.rect.y+3*this.rect.height/5,"Cancel"),this.skipTurnButton=new n(this,this.rect.x+this.rect.width-100,this.rect.y+4*this.rect.height/5,""),this.skipTurnButton.setVisible(!0),this.skipTurnButton.setText("Skip Turn"),this.skipTurnButton.on("pointerup",function(t){this.updateBoardAndMenu(j.EMPTY),this.Board.events.emit("endTurn")},this),this.cancelButton.on("pointerup",function(t){this.updateBoardAndMenu(j.EMPTY)},this),this.menuText=this.add.text(this.rect.x+120,this.rect.y+20,"",r.menuText)}updateBoardAndMenu(t){switch(this.state=t,t){case j.EMPTY:this.Board.events.emit("enableBoard"),this.undoAndRemoveTweens(),null!==this.card&&(this.card.addInputs(),this.isReserved&&this.card.destroy(),this.card=null),this.chips.length>0&&(this.chips.forEach(function(t){t.destroy()}),this.chips.length=0),this.customCost={black:0,white:0,red:0,green:0,blue:0,gold:0},this.returnChips.length=0,this.removeChipsFromMenu(),this.isReserved=!1;break;case j.BUY_OR_RESERVE_CARD:case j.RESERVE_CARD:this.addTween(0,this.card);break;case j.BUY_CARD_SWAP_CHIPS:const e=this.currentPlayer.cardManager.getRemainingCost(this.card.cardJson.cost);this.customCost=e,this.addChipsToMenu(e);break;case j.BUY_CARD_SWAP_CHIPS_REPLACED:this.updateCustomCostChipInputAndCount();break;case j.ADDING_CHIP:1===this.chips.length?(this.addTween(0,this.chips[0]),this.Board.events.emit("disableShortStackChips",this.chips[0].color)):2===this.chips.length?(this.addTween(1,this.chips[1]),this.Board.events.emit("disableChips",this.chips[0].color),this.Board.events.emit("disableChips",this.chips[1].color)):3===this.chips.length&&(this.addTween(2,this.chips[2]),this.Board.events.emit("disableChips","all"));break;case j.TAKE_CHIPS:this.Board.events.emit("disableChips","all");break;case j.OVER_CHIP_LIMIT:null===this.card&&this.chips.forEach(function(t){t.setVisible(!1)}),this.addChipsToMenu(this.currentPlayer.chips);break;case j.OVER_CHIP_LIMIT_RETURN_CHIPS:this.updateReturningChipInputAndCount();break;case j.BUY_RESERVE_CARD:break;default:console.log(`Unhandled State ${this.state}: updateBoardAndMenu`)}this.updateMenuTextAndButtons()}updateMenuTextAndButtons(){switch(this.setDefaultMenuText(),this.state){case j.EMPTY:this.button1.setVisible(!1),this.button2.setVisible(!1),this.cancelButton.setVisible(!1);break;case j.BUY_OR_RESERVE_CARD:this.button1.setVisible(!0),this.button2.setVisible(!0),this.setToBuyCardButton(this.button1),this.setToReserveCardButton(this.button2),this.cancelButton.setVisible(!0);break;case j.RESERVE_CARD:this.button1.setVisible(!0),this.setToReserveCardButton(this.button1),this.cancelButton.setVisible(!0);break;case j.BUY_CARD_SWAP_CHIPS:case j.BUY_CARD_SWAP_CHIPS_REPLACED:const t=this.currentPlayer.numGoldChips-this.customCost.gold;let e=`${this.currentPlayer.numGoldChips} gold chips`;1===this.currentPlayer.numGoldChips&&(e="1 gold chip"),this.menuText.setText(`You have ${e}. Click the chip you want `+`to replace with a gold chip (${t} left).`),this.button1.setVisible(!0),this.button2.setVisible(!0),this.setToConfirmBuyButton(this.button1),this.setToDoNotUseGoldButton(this.button2),this.cancelButton.setVisible(!0);break;case j.ADDING_CHIP:this.button1.setVisible(!1),this.button2.setVisible(!1),this.cancelButton.setVisible(!0);break;case j.TAKE_CHIPS:this.button1.setVisible(!0),this.setToTakeChipButton(this.button1),this.button2.setVisible(!1),this.cancelButton.setVisible(!0);break;case j.OVER_CHIP_LIMIT:case j.OVER_CHIP_LIMIT_RETURN_CHIPS:const s=this.currentPlayer.numOverChipLimit(Math.abs(this.chips.length-this.returnChips.length));1===s?this.menuText.setText("You are 1 chip over the limit. Click on the chip you want to return."):s>1?this.menuText.setText(`You are ${s} chips over the limit. Click on the chips you want to return.`):this.menuText.setText("Click Return to return your selected chips."),this.button1.setVisible(!0),this.setToReturnChipsButton(this.button1),this.button2.setVisible(!1),this.cancelButton.setVisible(!0);break;case j.BUY_RESERVE_CARD:this.button1.setVisible(!0),this.button2.setVisible(!1),this.setToBuyCardButton(this.button1),this.cancelButton.setVisible(!0);break;default:console.log(`Unhandled State ${this.state}: updateMenuTextAndButtons`)}}setDefaultMenuText(){let t=`Round ${this.playerManager.currentRound}`;this.playerManager.isLastRound&&(t+=" (LAST ROUND)"),this.menuText.setText(`${t}: ${this.currentPlayer.name}, it's your turn.`)}setToTakeChipButton(t){t.removeAllListeners(),t.on("pointerup",this.takeChips,this),t.setText("Take"),t.setDisabled(!1)}setToReturnChipsButton(t){t.removeAllListeners(),t.setText("Return");const e=this.currentPlayer.isOverChipLimit(Math.abs(this.chips.length-this.returnChips.length));t.setDisabled(e),e||t.on("pointerup",this.takeAndReturnChips,this)}setToBuyCardButton(t){t.removeAllListeners(),t.setText("Buy"),t.setDisabled(!this.currentPlayer.canBuy(this.card)),this.currentPlayer.canBuy(this.card)&&t.on("pointerup",this.buyCard,this)}setToReserveCardButton(t){t.removeAllListeners(),t.setText("Reserve"),t.setDisabled(!this.currentPlayer.canReserve()),this.currentPlayer.canReserve()&&t.on("pointerup",this.reserveCard,this)}setToDoNotUseGoldButton(t){t.removeAllListeners(),t.setText("Don't Use Gold"),t.setDisabled(!1),t.on("pointerup",this.buyCardNoGold,this)}setToConfirmBuyButton(t){t.removeAllListeners(),t.setText("Confirm"),t.setDisabled(0===this.currentPlayer.numGoldChips||0===this.customCost.gold),this.customCost.gold>0&&t.on("pointerup",this.buyCardCustomCost,this)}buyCard(t){this.currentPlayer.canBuyMultipleWaysWithChips(this.card)?this.updateBoardAndMenu(j.BUY_CARD_SWAP_CHIPS):(this.Board.events.emit("buyCard",this.card),this.updateBoardAndMenu(j.EMPTY))}buyCardNoGold(t){this.Board.events.emit("buyCard",this.card,this.card.cardJson.cost),this.updateBoardAndMenu(j.EMPTY)}buyCardCustomCost(t){this.Board.events.emit("buyCard",this.card,this.customCost),this.updateBoardAndMenu(j.EMPTY)}reserveCard(t){if(this.Board.chipManager.gold>0&&this.currentPlayer.isOverChipLimit(1)){const t=new U(this,this.Board.goldChip.coordinates,this.Board.goldChip.color);return t.removeInputs(),this.chips.push(t),void this.updateBoardAndMenu(j.OVER_CHIP_LIMIT)}this.Board.events.emit("reserveCard",this.card),this.updateBoardAndMenu(j.EMPTY)}takeChips(t){this.currentPlayer.isOverChipLimit(this.chips.length)?this.updateBoardAndMenu(j.OVER_CHIP_LIMIT):(this.Board.events.emit("takeChips",this.chips),this.updateBoardAndMenu(j.EMPTY))}takeAndReturnChips(t){null!==this.card?this.Board.events.emit("reserveCardAndReturnChips",this.card,this.chips,this.returnChips):this.Board.events.emit("takeAndReturnChips",this.chips,this.returnChips),this.updateBoardAndMenu(j.EMPTY)}addCardToMenu(t){this.updateBoardAndMenu(j.EMPTY),this.card=t,t.removeInputs(),this.card.isFaceUp?this.updateBoardAndMenu(j.BUY_OR_RESERVE_CARD):this.updateBoardAndMenu(j.RESERVE_CARD)}addChipToMenu(t){null===this.card&&this.state!==j.OVER_CHIP_LIMIT&&this.state!==j.OVER_CHIP_LIMIT_RETURN_CHIPS||this.updateBoardAndMenu(j.EMPTY);const e=new U(this,t.coordinates,t.color);this.chips.push(e),e.removeInputs(),this.updateBoardAndMenu(j.ADDING_CHIP),this.canTakeChips()&&this.updateBoardAndMenu(j.TAKE_CHIPS)}addReserveCardToMenu(t){this.updateBoardAndMenu(j.EMPTY);const e={x:R.cardPos.x,y:this.rect.y+this.rect.height/2};this.card=new _(this,e,t),this.card.removeInputs(),this.isReserved=!0,this.updateBoardAndMenu(j.BUY_RESERVE_CARD)}canTakeChips(){return 3===this.chips.length||2===this.chips.length&&this.chips[0].color===this.chips[1].color||this.chips.length===this.Board.chipColorCountNoGold||this.Board.chipCountNoGold===this.chips.length}clickChip(t){switch(this.state){case j.EMPTY:case j.BUY_OR_RESERVE_CARD:case j.RESERVE_CARD:case j.ADDING_CHIP:case j.TAKE_CHIPS:case j.BUY_RESERVE_CARD:break;case j.BUY_CARD_SWAP_CHIPS:case j.BUY_CARD_SWAP_CHIPS_REPLACED:I.subtractChipsToColorJson([t],this.customCost),this.customCost.gold++,this.updateBoardAndMenu(j.BUY_CARD_SWAP_CHIPS_REPLACED);break;case j.OVER_CHIP_LIMIT:case j.OVER_CHIP_LIMIT_RETURN_CHIPS:this.returnChips.push(t),this.updateBoardAndMenu(j.OVER_CHIP_LIMIT_RETURN_CHIPS);break;default:console.log(`Unhandled State ${this.state}: clickChip`)}}addChipsToMenu(t){const e=I.copyColorJson(t);I.addChipsToColorJson(this.chips,e);const s=[R.chipMenu.pos0,R.chipMenu.pos1,R.chipMenu.pos2,R.chipMenu.pos3,R.chipMenu.pos4,R.chipMenu.pos5],i=[R.chipMenuCount.pos0,R.chipMenuCount.pos1,R.chipMenuCount.pos2,R.chipMenuCount.pos3,R.chipMenuCount.pos4,R.chipMenuCount.pos5];let r=0;null===this.blackChip&&e.black>0&&(this.blackChip=new U(this,s[r],"black"),this.chipCountText.black=this.drawChipCountText(i[r++],e.black)),null===this.whiteChip&&e.white>0&&(this.whiteChip=new U(this,s[r],"white"),this.chipCountText.white=this.drawChipCountText(i[r++],e.white)),null===this.redChip&&e.red>0&&(this.redChip=new U(this,s[r],"red"),this.chipCountText.red=this.drawChipCountText(i[r++],e.red)),null===this.greenChip&&e.green>0&&(this.greenChip=new U(this,s[r],"green"),this.chipCountText.green=this.drawChipCountText(i[r++],e.green)),null===this.blueChip&&e.blue>0&&(this.blueChip=new U(this,s[r],"blue"),this.chipCountText.blue=this.drawChipCountText(i[r++],e.blue)),null===this.goldChip&&e.gold>0&&(this.goldChip=new U(this,s[r],"gold"),this.chipCountText.gold=this.drawChipCountText(i[r++],e.gold)),this.state===j.BUY_CARD_SWAP_CHIPS&&(this.goldChip=new U(this,R.chipMenu.pos5,"gold"),this.goldChip.removeInputs(),this.chipCountText.gold=this.drawChipCountText(R.chipMenuCount.pos5,this.customCost.gold))}updateCustomCostChipInputAndCount(){if(this.state!==j.BUY_CARD_SWAP_CHIPS_REPLACED)return;const t=this.customCost.gold===this.currentPlayer.numGoldChips;null!==this.chipCountText.black&&this.chipCountText.black.setText(this.customCost.black),null!==this.chipCountText.white&&this.chipCountText.white.setText(this.customCost.white),null!==this.chipCountText.red&&this.chipCountText.red.setText(this.customCost.red),null!==this.chipCountText.green&&this.chipCountText.green.setText(this.customCost.green),null!==this.chipCountText.blue&&this.chipCountText.blue.setText(this.customCost.blue),null!==this.chipCountText.gold&&this.chipCountText.gold.setText(this.customCost.gold),null===this.blackChip||!t&&0!==this.customCost.black||this.blackChip.removeInputs(),null===this.whiteChip||!t&&0!==this.customCost.white||this.whiteChip.removeInputs(),null===this.redChip||!t&&0!==this.customCost.red||this.redChip.removeInputs(),null===this.greenChip||!t&&0!==this.customCost.green||this.greenChip.removeInputs(),null===this.blueChip||!t&&0!==this.customCost.blue||this.blueChip.removeInputs()}updateReturningChipInputAndCount(){if(this.state!==j.OVER_CHIP_LIMIT_RETURN_CHIPS)return;const t=I.convertChipsToColorJson(this.returnChips),e=I.copyColorJson(this.currentPlayer.chips);I.addChipsToColorJson(this.chips,e),null!==this.chipCountText.black&&this.chipCountText.black.setText(e.black-t.black),null!==this.chipCountText.white&&this.chipCountText.white.setText(e.white-t.white),null!==this.chipCountText.red&&this.chipCountText.red.setText(e.red-t.red),null!==this.chipCountText.green&&this.chipCountText.green.setText(e.green-t.green),null!==this.chipCountText.blue&&this.chipCountText.blue.setText(e.blue-t.blue),null!==this.chipCountText.gold&&this.chipCountText.gold.setText(e.gold-t.gold);const s=this.currentPlayer.isOverChipLimit(Math.abs(this.chips.length-this.returnChips.length));null===this.blackChip||s&&t.black!==e.black||this.blackChip.removeInputs(),null===this.whiteChip||s&&t.white!==e.white||this.whiteChip.removeInputs(),null===this.redChip||s&&t.red!==e.red||this.redChip.removeInputs(),null===this.greenChip||s&&t.green!==e.green||this.greenChip.removeInputs(),null===this.blueChip||s&&t.blue!==e.blue||this.blueChip.removeInputs(),null===this.goldChip||s&&t.gold!==e.gold||this.goldChip.removeInputs()}removeChipsFromMenu(){null!==this.blackChip&&(this.blackChip.destroy(!0),this.blackChip=null,this.chipCountText.black.destroy(!0),this.chipCountText.black=null),null!==this.whiteChip&&(this.whiteChip.destroy(!0),this.whiteChip=null,this.chipCountText.white.destroy(!0),this.chipCountText.white=null),null!==this.redChip&&(this.redChip.destroy(!0),this.redChip=null,this.chipCountText.red.destroy(!0),this.chipCountText.red=null),null!==this.greenChip&&(this.greenChip.destroy(!0),this.greenChip=null,this.chipCountText.green.destroy(!0),this.chipCountText.green=null),null!==this.blueChip&&(this.blueChip.destroy(!0),this.blueChip=null,this.chipCountText.blue.destroy(!0),this.chipCountText.blue=null),null!==this.goldChip&&(this.goldChip.destroy(!0),this.goldChip=null,this.chipCountText.gold.destroy(!0),this.chipCountText.gold=null)}drawChipCountText(t,e){const s=this.add.text(t.x,t.y,e,r.menuText);return s.setOrigin(.5),s}addTween(t,e){let s=R.cardPos;null===this.card&&(0===t?s=R.chipPos0:1===t?s=R.chipPos1:2===t&&(s=R.chipPos2));const i=this.tweens.add({targets:e,x:s.x,y:this.rect.y+this.rect.height/2,duration:250,ease:"Cubic",onStart:function(){this.scene.pause("Board"),null===this.card&&this.scene.bringToTop("InGameMenu"),e.setDepth(1)},onStartScope:this,onComplete:function(){this.scene.wake("Board"),null===this.card&&this.scene.sendToBack("InGameMenu"),e.setDepth(0)},onCompleteScope:this},this);0===t?this.tween1=i:1===t?this.tween2=i:2===t&&(this.tween3=i)}undoAndRemoveTweens(){null!==this.tween1&&(this.tween1.seek(0),this.tween1=null),null!==this.tween2&&(this.tween2.seek(0),this.tween2=null),null!==this.tween3&&(this.tween3.seek(0),this.tween3=null)}}const K={borderStroke:2,borderStrokeCurrentPlayer:4,borderWidth:250,borderHeight:135,cardStroke:2,chipRadius:16,chipStroke:2,pointsRadius:16,pointsStroke:2,reserveCardStrokeOut:2,reserveCardStrokeOver:4};class q extends Phaser.GameObjects.Container{constructor(t,e,s){super(t,e.x,e.y),this.player=s,this.chips=s.chipManager,this.cards=s.cardManager,this.reservedCards=s.reserveCardManager,this.playerInfo={black:null,white:null,red:null,green:null,blue:null,gold:null,points:null,reserve1:null,reserve2:null,reserve3:null},this.draw(),t.add.existing(this)}isCurrentPlayer(){return this.scene.currentPlayer.name===this.player.name}draw(){const t=[0,0,0,K.borderHeight,K.borderWidth,K.borderHeight,K.borderWidth,0];this.border=this.scene.add.polygon(0,0,t),this.border.setStrokeStyle(K.borderStroke,i.black),this.border.setFillStyle(i.menu,1),this.border.setOrigin(0,0),this.add(this.border);const e=this.scene.add.text(R.playerInfo.name.x,R.playerInfo.name.y,this.player.name,r.playerInfo.name);e.setOrigin(0,.5),this.add(e),this.playerInfo.black=this.drawCardAndChip(R.playerInfo.black,i.black),this.playerInfo.white=this.drawCardAndChip(R.playerInfo.white,i.white),this.playerInfo.red=this.drawCardAndChip(R.playerInfo.red,i.red),this.playerInfo.green=this.drawCardAndChip(R.playerInfo.green,i.green),this.playerInfo.blue=this.drawCardAndChip(R.playerInfo.blue,i.blue),this.playerInfo.gold=this.drawChip(R.playerInfo.gold,i.gold),this.playerInfo.points=this.drawPoints(R.playerInfo.points),this.playerInfo.reserve1=this.drawCard(R.playerInfo.reserve1,i.cardLevel1),this.playerInfo.reserve2=this.drawCard(R.playerInfo.reserve2,i.cardLevel2),this.playerInfo.reserve3=this.drawCard(R.playerInfo.reserve3,i.cardLevel3),this.updateInfo()}updateInfo(){this.updateCardAndChip(this.playerInfo.black,this.cards.black,this.chips.black),this.updateCardAndChip(this.playerInfo.white,this.cards.white,this.chips.white),this.updateCardAndChip(this.playerInfo.red,this.cards.red,this.chips.red),this.updateCardAndChip(this.playerInfo.green,this.cards.green,this.chips.green),this.updateCardAndChip(this.playerInfo.blue,this.cards.blue,this.chips.blue),this.updateChip(this.playerInfo.gold,this.chips.gold),this.updateReserveCard(this.playerInfo.reserve1,this.player.getReserveCardJson(0)),this.updateReserveCard(this.playerInfo.reserve2,this.player.getReserveCardJson(1)),this.updateReserveCard(this.playerInfo.reserve3,this.player.getReserveCardJson(2)),this.playerInfo.points.setText(this.player.points),this.isCurrentPlayer()?this.border.setStrokeStyle(K.borderStrokeCurrentPlayer,i.black):this.border.setStrokeStyle(K.borderStroke,i.black)}drawCard(t,e){const s=this.scene.add.text(t.x,t.y,"0",r.playerInfo.cost);s.setOrigin(.5),s.setPadding({left:2,top:1,right:2,bottom:1});const n=[0,0,0,s.height,s.width,s.height,s.width,0],h=this.scene.add.polygon(s.x,s.y,n,e);return h.setStrokeStyle(K.cardStroke,i.black),h.setInteractive(),this.add(h),this.add(s),{rect:h,cardText:s}}drawChip(t,e){const s=this.scene.add.circle(t.x,t.y,K.chipRadius+K.chipStroke,i.black),n=this.scene.add.circle(t.x,t.y,K.chipRadius,e),h=this.scene.add.text(n.x,n.y,"0",r.playerInfo.cost);return h.setOrigin(.5),this.add(s),this.add(n),this.add(h),{blackBorder:s,circle:n,chipText:h}}drawCardAndChip(t,e){const s=this.drawCard(t,e),i={x:s.cardText.x+s.cardText.width+.5,y:s.cardText.y},r=this.drawChip(i,e);return{rect:s.rect,cardText:s.cardText,blackBorder:r.blackBorder,circle:r.circle,chipText:r.chipText}}drawPoints(t){const e=this.scene.add.circle(t.x,t.y,K.pointsRadius+K.pointsStroke,i.black),s=this.scene.add.circle(e.x,e.y,K.pointsRadius,i.lightGray),n=this.scene.add.text(s.x,s.y,"0",r.playerInfo.points);return n.setOrigin(.5),this.add(e),this.add(s),this.add(n),n}updateCard(t,e){0===e?t.rect.setAlpha(.5):t.rect.setAlpha(1),t.cardText.setVisible(0!==e),t.cardText.setText(e)}updateReserveCard(t,e){if(null!==e){let s=i.cardLevel1;2===e.level?s=i.cardLevel2:3===e.level&&(s=i.cardLevel3),t.rect.setFillStyle(s),this.isCurrentPlayer()?this.addReserveCardInputs(t.rect,e):this.removeReserveCardInputs(t.rect)}t.rect.setVisible(null!==e),t.cardText.setVisible(!1)}updateChip(t,e){t.blackBorder.setVisible(0!==e),t.circle.setVisible(0!==e),t.chipText.setVisible(0!==e),t.chipText.setText(e)}updateCardAndChip(t,e,s){this.updateCard(t,e),this.updateChip(t,s)}addReserveCardInputs(t,e){this.removeReserveCardInputs(t),t.on("pointerover",this.over,t),t.on("pointerout",this.out,t),t.on("pointerup",function(t,s,i,r){this.scene.events.emit("clickReserveCard",e)},this)}removeReserveCardInputs(t){t.off("pointerover"),t.off("pointerout"),t.off("pointerup")}over(t,e,s,r){this.setStrokeStyle(K.reserveCardStrokeOver,i.black)}out(t,e){this.setStrokeStyle(K.reserveCardStrokeOut,i.black)}}class Q extends Phaser.Scene{constructor(){super({key:"PlayerInfoPane",active:!1,visible:!1}),this.playerManager=null,this.playerInfoList=[],this.InGameMenu=null}init(t){this.playerManager=t.playerManager,this.playerInfoList.length=0}preload(){this.InGameMenu=this.scene.get("InGameMenu")}create(){this.events.on("updatePlayerInfoPane",this.updatePlayerInfoPane,this),this.events.on("clickReserveCard",this.clickReserveCard,this);let t=0;this.playerManager.players.forEach(function(e){this.playerInfoList.push(new q(this,{x:R.window.x,y:R.window.y+t},e)),t+=R.playerInfo.yOffset},this)}get currentPlayer(){return this.playerManager.getCurrentPlayer()}updatePlayerInfoPane(){this.playerInfoList.forEach(function(t){t.updateInfo()},this)}clickReserveCard(t){this.InGameMenu.events.emit("addReserveCardToMenu",t)}}var z={title:"PhaserSplendor",type:Phaser.AUTO,parent:phaser,width:1024,height:640,maxWidth:1440,maxHeight:900,minWidth:720,minHeight:480,scale:{mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.NO_CENTER},dom:{createContainer:!0},backgroundColor:i.board,disableContextMenu:!0,antialias:!0};class Z extends Phaser.Game{constructor(){super(z),this.scene.add("StartScreen",h),this.scene.add("Board",N),this.scene.add("PlayerInfoPane",Q),this.scene.add("InGameMenu",X),this.scene.add("EndScreen",J),this.scene.add("RestartScreen",V)}restartGame(){this.scene.remove("StartScreen",h),this.scene.remove("Board",N),this.scene.remove("PlayerInfoPane",Q),this.scene.remove("InGameMenu",X),this.scene.remove("EndScreen",J),this.scene.add("StartScreen",h),this.scene.add("Board",N),this.scene.add("PlayerInfoPane",Q),this.scene.add("InGameMenu",X),this.scene.add("EndScreen",J)}}window.onload=function(){window.game=new Z}}});